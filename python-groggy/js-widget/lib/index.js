define("groggy-widgets",["@jupyter-widgets/base"],t=>(()=>{"use strict";var e={55:e=>{e.exports=t}},i={};function o(t){var n=i[t];if(void 0!==n)return n.exports;var r=i[t]={exports:{}};return e[t](r,r.exports,o),r.exports}o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};o.r(n),o.d(n,{GroggyGraphModel:()=>a,GroggyGraphView:()=>l,MODULE_NAME:()=>s,MODULE_VERSION:()=>d,default:()=>g});var r=o(55);const s="groggy-widgets",d="0.1.0";class a extends r.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:"GroggyGraphModel",_model_module:s,_model_module_version:d,_view_name:"GroggyGraphView",_view_module:s,_view_module_version:d,nodes:[],edges:[],title:"Graph Visualization"})}}a.model_name="GroggyGraphModel",a.model_module=s,a.model_module_version=d;class l extends r.DOMWidgetView{constructor(){super(...arguments),this.nodePositions=new Map,this.isDragging=!1,this.dragNode=null,this.dragOffset={x:0,y:0}}render(){this.el.style.cssText="\n      border: 2px solid #4CAF50;\n      padding: 10px;\n      margin: 10px;\n      border-radius: 8px;\n      background: #f9f9f9;\n      font-family: Arial, sans-serif;\n      min-height: 400px;\n      position: relative;\n      user-select: none;\n    ";const t=document.createElement("div");t.style.cssText="\n      font-weight: bold;\n      margin-bottom: 10px;\n      color: #333;\n    ",t.textContent=this.model.get("title")||"Graph Visualization",this.el.appendChild(t);const e=document.createElement("div");e.style.cssText="\n      width: 100%;\n      height: 350px;\n      border: 1px solid #ddd;\n      background: white;\n      position: relative;\n      overflow: hidden;\n      cursor: grab;\n    ",this.el.appendChild(e),this.renderGraph(e),this.model.on("change",this.onModelChange,this)}renderGraph(t){const e=this.model.get("nodes")||[],i=this.model.get("edges")||[];if(t.innerHTML="",0===e.length)return void(t.innerHTML='\n        <div style="\n          display: flex; \n          align-items: center; \n          justify-content: center; \n          height: 100%; \n          color: #666;\n          font-style: italic;\n        ">\n          No graph data provided. Add nodes and edges to see visualization.\n        </div>\n      ');const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.style.cursor="grab",t.appendChild(o);const n=t.clientWidth/2,r=t.clientHeight/2,s=.7*Math.min(n,r);0===this.nodePositions.size&&e.forEach((t,i)=>{const o=2*Math.PI*i/e.length,d=n+s*Math.cos(o),a=r+s*Math.sin(o);this.nodePositions.set(t.id,{x:d,y:a})});const d=[];i.forEach(t=>{const e=this.nodePositions.get(t.source),i=this.nodePositions.get(t.target);if(e&&i){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",e.x.toString()),t.setAttribute("y1",e.y.toString()),t.setAttribute("x2",i.x.toString()),t.setAttribute("y2",i.y.toString()),t.setAttribute("stroke","#999"),t.setAttribute("stroke-width","2"),t.setAttribute("opacity","0.6"),o.appendChild(t),d.push(t)}}),e.forEach(t=>{const e=this.nodePositions.get(t.id);if(!e)return;const n=document.createElementNS("http://www.w3.org/2000/svg","g");n.style.cursor="grab";const r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttribute("cx",e.x.toString()),r.setAttribute("cy",e.y.toString()),r.setAttribute("r",(t.size||20).toString()),r.setAttribute("fill",this.getNodeColor(t.group)),r.setAttribute("stroke","#333"),r.setAttribute("stroke-width","2"),r.style.filter="drop-shadow(2px 2px 4px rgba(0,0,0,0.3))";const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("x",e.x.toString()),s.setAttribute("y",(e.y+5).toString()),s.setAttribute("text-anchor","middle"),s.setAttribute("font-family","Arial, sans-serif"),s.setAttribute("font-size","12"),s.setAttribute("fill","#333"),s.setAttribute("pointer-events","none"),s.textContent=t.label||t.id,n.appendChild(r),n.appendChild(s),o.appendChild(n),this.addDragBehavior(n,t,r,s,d,i)});const a=document.createElement("div");a.style.cssText="\n      position: absolute;\n      top: 5px;\n      right: 5px;\n      background: rgba(255,255,255,0.9);\n      padding: 5px;\n      border-radius: 3px;\n      font-size: 12px;\n      color: #666;\n    ",a.innerHTML=`${e.length} nodes, ${i.length} edges<br><small>Drag nodes to reposition</small>`,t.appendChild(a)}addDragBehavior(t,e,i,o,n,r){let s=0,d=0,a=!1;const l=e=>{a=!0,s=e.clientX,d=e.clientY,t.style.cursor="grabbing",i.setAttribute("stroke-width","3"),e.preventDefault()},g=t=>{if(!a)return;const l=t.clientX-s,g=t.clientY-d,c=this.nodePositions.get(e.id),u=c.x+l,p=c.y+g;this.nodePositions.set(e.id,{x:u,y:p}),i.setAttribute("cx",u.toString()),i.setAttribute("cy",p.toString()),o.setAttribute("x",u.toString()),o.setAttribute("y",(p+5).toString()),this.updateEdges(e.id,n,r),s=t.clientX,d=t.clientY},c=()=>{a=!1,t.style.cursor="grab",i.setAttribute("stroke-width","2")};t.addEventListener("mousedown",l),document.addEventListener("mousemove",g),document.addEventListener("mouseup",c),t.addEventListener("touchstart",t=>{const e=t.touches[0];l({clientX:e.clientX,clientY:e.clientY,preventDefault:()=>t.preventDefault()})}),document.addEventListener("touchmove",t=>{if(a){const e=t.touches[0];g({clientX:e.clientX,clientY:e.clientY}),t.preventDefault()}}),document.addEventListener("touchend",c),t.addEventListener("mouseenter",()=>{a||(i.setAttribute("opacity","0.8"),i.style.filter="drop-shadow(3px 3px 6px rgba(0,0,0,0.4))")}),t.addEventListener("mouseleave",()=>{a||(i.setAttribute("opacity","1"),i.style.filter="drop-shadow(2px 2px 4px rgba(0,0,0,0.3))")})}updateEdges(t,e,i){i.forEach((i,o)=>{if(i.source===t||i.target===t){const t=this.nodePositions.get(i.source),n=this.nodePositions.get(i.target);t&&n&&e[o]&&(e[o].setAttribute("x1",t.x.toString()),e[o].setAttribute("y1",t.y.toString()),e[o].setAttribute("x2",n.x.toString()),e[o].setAttribute("y2",n.y.toString()))}})}getNodeColor(t){return{person:"#FF6B6B",team:"#4ECDC4",project:"#45B7D1",executive:"#96CEB4",manager:"#FFEAA7",lead:"#DDA0DD",developer:"#98D8C8",product:"#F7DC6F",application:"#85C1E9",service:"#F8C471",storage:"#82E0AA",infrastructure:"#D7BDE2",core:"#F1948A",satellite:"#AED6F1"}[t]||"#BDC3C7"}onModelChange(){const t=this.el.querySelector("div:last-child");t&&this.renderGraph(t);const e=this.el.querySelector("div:first-child");e&&(e.textContent=this.model.get("title")||"Graph Visualization")}}l.view_name="GroggyGraphView",l.view_module=s,l.view_module_version=d;const g={id:"groggy-widgets:plugin",requires:[r.IJupyterWidgetRegistry],autoStart:!0,activate:function(t,e){console.log("[groggy-widgets] export shape fix - checking prototype chain"),console.log("types:",typeof a,typeof l),console.log("is Model subclass:",a.prototype instanceof r.DOMWidgetModel),console.log("is View  subclass:",l.prototype instanceof r.DOMWidgetView),e.registerWidget({name:s,version:d,exports:{GroggyGraphModel:a,GroggyGraphView:l}}),console.log("âœ… Export shape fix: registered actual GroggyGraphView")}};return n})());
//# sourceMappingURL=index.js.map