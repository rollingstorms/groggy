<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groggy Graph Visualization</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/graph-styles.css">
</head>
<body>
    <div id="app">
        <!-- Loading screen -->
        <div id="loading" class="loading-screen">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading Graph Visualization...</div>
        </div>

        <!-- Main visualization container -->
        <div id="viz-container" class="viz-container" style="display: none;">
            <!-- Header with controls -->
            <header class="viz-header">
                <div class="header-left">
                    <h1 class="viz-title">ðŸŽ¨ Groggy Graph Visualization</h1>
                    <div class="graph-stats">
                        <span id="node-count">0 nodes</span>
                        <span id="edge-count">0 edges</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="control-group">
                        <label for="layout-select">Layout:</label>
                        <select id="layout-select" class="control-select">
                            <option value="force">Force-Directed</option>
                            <option value="circular">Circular</option>
                            <option value="hierarchical">Hierarchical</option>
                            <option value="grid">Grid</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="theme-select">Theme:</label>
                        <select id="theme-select" class="control-select">
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                            <option value="publication">Publication</option>
                            <option value="minimal">Minimal</option>
                            <option value="neon">Neon</option>
                        </select>
                    </div>
                    <button id="fullscreen-btn" class="control-button" title="Fullscreen">â›¶</button>
                </div>
            </header>

            <!-- Main content area -->
            <div class="viz-main">
                <!-- Sidebar for filters and info -->
                <aside class="viz-sidebar">
                    <!-- Search box -->
                    <div class="sidebar-section">
                        <h3>Search</h3>
                        <input type="text" id="node-search" placeholder="Search nodes..." class="search-input">
                    </div>

                    <!-- Filters -->
                    <div class="sidebar-section">
                        <h3>Filters</h3>
                        <div id="filters-container">
                            <!-- Dynamic filter controls will be added here -->
                        </div>
                        <button id="clear-filters" class="control-button secondary">Clear All</button>
                    </div>

                    <!-- Selection info -->
                    <div class="sidebar-section">
                        <h3>Selection</h3>
                        <div id="selection-info">
                            <p class="selection-count">Nothing selected</p>
                            <div id="selection-details" style="display: none;">
                                <!-- Selected node/edge details -->
                            </div>
                        </div>
                    </div>

                    <!-- Graph statistics -->
                    <div class="sidebar-section">
                        <h3>Statistics</h3>
                        <div id="graph-stats">
                            <div class="stat-item">
                                <span class="stat-label">Density:</span>
                                <span id="density-value">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Avg Degree:</span>
                                <span id="avg-degree-value">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Components:</span>
                                <span id="components-value">-</span>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Canvas area -->
                <main class="viz-canvas-area">
                    <!-- Canvas container -->
                    <div id="canvas-container" class="canvas-container">
                        <canvas id="graph-canvas" class="graph-canvas"></canvas>
                        
                        <!-- SVG overlay for markers and decorations -->
                        <svg class="graph-markers" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
                            <defs>
                                <!-- Arrow markers -->
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                                        refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" />
                                </marker>
                                
                                <marker id="arrowhead-selected" markerWidth="12" markerHeight="9" 
                                        refX="11" refY="4.5" orient="auto">
                                    <polygon points="0 0, 12 4.5, 0 9" />
                                </marker>
                                
                                <!-- Circle markers -->
                                <marker id="circle-marker" markerWidth="8" markerHeight="8" 
                                        refX="4" refY="4" orient="auto">
                                    <circle cx="4" cy="4" r="3" />
                                </marker>
                                
                                <!-- Diamond markers -->
                                <marker id="diamond-marker" markerWidth="10" markerHeight="10" 
                                        refX="5" refY="5" orient="auto">
                                    <polygon points="5 0, 10 5, 5 10, 0 5" />
                                </marker>
                                
                                <!-- Gradient definitions for themes -->
                                <linearGradient id="node-gradient-light" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.8" />
                                    <stop offset="100%" style="stop-color:#f0f0f0;stop-opacity:0.8" />
                                </linearGradient>
                                
                                <linearGradient id="node-gradient-dark" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#3a3a3a;stop-opacity:0.8" />
                                    <stop offset="100%" style="stop-color:#1a1a1a;stop-opacity:0.8" />
                                </linearGradient>
                                
                                <!-- Filters for special effects -->
                                <filter id="glow">
                                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                    <feMerge> 
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                                
                                <filter id="drop-shadow">
                                    <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.3"/>
                                </filter>
                            </defs>
                        </svg>
                        
                        <!-- Canvas overlays -->
                        <div class="canvas-overlay">
                            <!-- Selection box -->
                            <div id="selection-box" class="selection-box" style="display: none;"></div>
                            
                            <!-- Tooltips -->
                            <div id="tooltip" class="tooltip" style="display: none;">
                                <div class="tooltip-content"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Canvas controls -->
                    <div class="canvas-controls">
                        <div class="zoom-controls">
                            <button id="zoom-in" class="control-button" title="Zoom In">+</button>
                            <button id="zoom-fit" class="control-button" title="Fit to Screen">âŒ‚</button>
                            <button id="zoom-out" class="control-button" title="Zoom Out">âˆ’</button>
                        </div>
                        
                        <div class="view-controls">
                            <button id="toggle-sidebar" class="control-button" title="Toggle Sidebar">â˜°</button>
                            <button id="screenshot" class="control-button" title="Export as PNG">ðŸ“·</button>
                        </div>
                    </div>
                </main>
            </div>

            <!-- Status bar -->
            <footer class="viz-status">
                <div class="status-left">
                    <span id="connection-status" class="status-indicator">ðŸ”´ Disconnected</span>
                    <span id="fps-counter" class="performance-indicator">FPS: --</span>
                </div>
                <div class="status-center">
                    <span id="status-message">Ready</span>
                </div>
                <div class="status-right">
                    <span id="node-hover-info"></span>
                </div>
            </footer>
        </div>

        <!-- Context menus -->
        <div id="node-context-menu" class="context-menu" style="display: none;">
            <div class="context-menu-item" data-action="details">Show Details</div>
            <div class="context-menu-item" data-action="neighbors">Highlight Neighbors</div>
            <div class="context-menu-item" data-action="hide">Hide Node</div>
            <hr class="context-menu-separator">
            <div class="context-menu-item" data-action="center">Center on Node</div>
        </div>

        <div id="edge-context-menu" class="context-menu" style="display: none;">
            <div class="context-menu-item" data-action="details">Show Details</div>
            <div class="context-menu-item" data-action="highlight">Highlight Path</div>
            <div class="context-menu-item" data-action="hide">Hide Edge</div>
        </div>

        <!-- Modal dialogs -->
        <div id="node-details-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Node Details</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="node-details-content"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/websocket-client.js"></script>
    <script src="js/graph-renderer.js"></script>
    <script src="js/interaction-manager.js"></script>
    <script src="js/layout-manager.js"></script>
    <script src="js/ui-manager.js"></script>
    <script src="js/filter-manager.js"></script>
    <script src="js/search-manager.js"></script>
    <script src="js/bulk-operations-manager.js"></script>
    <script src="js/filter-history-manager.js"></script>
    <script src="js/theme-manager.js"></script>
    <script src="js/main.js"></script>
</body>
</html>